---
layout:     post
title:      RCNNç³»åˆ—å­¦ä¹ 
date:       2024-12-09
author:     phoenixZ
header-img: img/oip12.jpeg
catalog: true
tags:
    - æ·±åº¦å­¦ä¹ 
    - ç›®æ ‡æ£€æµ‹
---
# ç›®æ ‡æ£€æµ‹è¯„ä»·æŒ‡æ ‡

 **TP**

> é¢„æµ‹æ¡†ä¸gt_box çš„iou å¤§äº0.5(é˜ˆå€¼)

 **FP**

> é¢„æµ‹æ¡†ä¸gt_box çš„iou å°ä¸ç­‰ä¸0.5(é˜ˆå€¼)

 **FN**

> æ²¡æœ‰æ£€æµ‹åˆ°gtçš„æ•°é‡

 **precision**

> TP / (TP + FP)
> æ¨¡å‹é¢„æµ‹æ‰€æœ‰ç›®æ ‡ä¸­ï¼Œé¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ ï¼ˆæŸ¥å‡†ç‡)

 **Recall**

> TP / (TP + FN)
> æ‰€æœ‰çœŸå®ç›®æ ‡ä¸­ï¼Œ é¢„æµ‹æ­£ç¡®çš„æ¯”ä¾‹ ï¼ˆæŸ¥å…¨ç‡ï¼‰

 **AP**

> P-Ræ›²çº¿ä¸‹é¢ç§¯

 **mAP**

> å„ç±»åˆ«APçš„å¹³å‡å€¼

# RCNN

1. åŸºäºSSç®—æ³•åœ¨æ¯å¼ å›¾ç‰‡ä¸Šç”Ÿæˆ2000ä¸ªå€™é€‰æ¡†
2. å°†å€™é€‰æ¡†åŒºåŸŸé€åˆ°backboneä¸­å¾—åˆ°ç‰¹å¾(2000x4096)
3. å¯¹ç‰¹å¾å‘é‡è¿›è¡ŒSVMåˆ†ç±»(20ä¸ªåˆ†ç±»å™¨)
   - 2000x4096  * 4096x20
   - å¾—åˆ°2000x20çš„æ¦‚ç‡çŸ©é˜µ
   - è¡¨ç¤ºç‰¹å¾åœ¨æ¯ä¸ªç±»åˆ«ä¸Šçš„æ¦‚ç‡
4. é‡‡ç”¨NMSæ»¤æ‰ä¸€éƒ¨åˆ†å€™é€‰æ¡†
   - å¾—åˆ°è¯¥ç±»åˆ«æœ€å¤§å¾—åˆ†çš„å€™é€‰æ¡†
   - ä¸å…¶ä»–å€™é€‰æ¡†è®¡ç®—IOU
   - IOU > é˜ˆå€¼åˆ™åˆ é™¤å…¶ä»–çš„å€™é€‰æ¡†
5. å›å½’è®­ç»ƒ
   - åˆ©ç”¨backboneç‰¹å¾å¯¹å€™é€‰æ¡†è¿›è¡Œä½ç½®ä¿®æ­£
   - å¾—åˆ°æ¯ä¸ªç±»åˆ«å¾—åˆ†æœ€é«˜çš„å€™é€‰æ¡† (1x20)

# fast-RCNN

  ğŸ‘‰ RCNNçš„é—®é¢˜æ˜¯2000ä¸ªå€™é€‰æ¡†éƒ½è¦é€å…¥åˆ°ç‰¹å¾å±‚ä¸­è¿›è¡Œç‰¹å¾æå–ï¼Œè®¡ç®—é‡å¾ˆå¤§

  ğŸ¯  ä¸ºè§£å†³ä¸Šé¢çš„é—®é¢˜

    1. fast-RCNN å°†åŸå§‹å›¾åƒä¸€è¾¹é€šè¿‡CNN è·å–ç‰¹å¾å›¾ï¼Œ åŒæ—¶ç”¨SSåœ¨åŸå§‹å›¾åƒä¸Šç”Ÿæˆ2000ä¸ªå€™é€‰æ¡†(å’Œrcnnä¸€è‡´)
    2. ç„¶åå°†è¿™äº›å€™é€‰æ¡†æ˜ å°„åˆ°ç‰¹å¾å›¾ä¸Šå¾—åˆ°ç‰¹å¾çŸ©é˜µ

 â­ï¸ åç»­æ“ä½œ

    1. ç‰¹å¾çŸ©é˜µé€šè¿‡ROI-Poolingå¾—åˆ°ç»Ÿä¸€çš„7x7ç‰¹å¾å›¾ ï¼ˆä¸é™åˆ¶è¾“å…¥å›¾åƒå°ºå¯¸ï¼‰
    2. å±•å¹³å¾—åˆ°é¢„æµ‹ç»“æœ åŒ…æ‹¬åˆ†ç±»å™¨+å€™é€‰æ¡†å›å½’

![](./../../../pic/fast-rcnn.png)

# faster-RCNN

## åŸºæœ¬æµç¨‹

  ![](./../../../pic/faster-rcnn.png)

ğŸ¯ **è‡ªå·±æ€»ç»“**

> 1. å›¾åƒè¿›è¡Œé¢„å¤„ç†é€å…¥åˆ°backboneä¸­ï¼ˆåŒ…æ‹¬æ ‡å‡†åŒ–ã€resize ä»¥åŠ batchï¼‰
> 2. backbone ç½‘ç»œå¯¹é¢„å¤„ç†åçš„å›¾åƒè¿›è¡Œç‰¹å¾æå–ï¼Œå¾—åˆ°ç‰¹å¾å›¾
> 3. é€šè¿‡ä¸€ä¸ª3âœ–3å·ç§¯ï¼Œåœ¨ç‰¹å¾å›¾ä¸Šç”Ÿæˆanchors (å¦‚ä¸‹åŠ¨å›¾æ‰€ç¤º)
>    - æ»‘åŠ¨çª—å£åœ¨ç‰¹å¾å›¾ä¸Šæ»‘åŠ¨æ—¶ï¼Œ æ¯æ¬¡ä¸­å¿ƒä½ç½®æ ¹æ®å¤šç§æ¯”ä¾‹ç”Ÿæˆå¯¹åº”anchoræ•°é‡
>    - å°†anchoræ˜ å°„åˆ°åŸå›¾ä¸Šï¼Œå¾—åˆ°anchorsåœ¨åŸå›¾ä¸Šçš„åæ ‡
> 4. ç„¶ååŸºäºanchorå¾—åˆ°åˆ†ç±»å’Œè¾¹ç•Œæ¡†å›å½’åç§»é‡
>    - åˆ†ç±»æ˜¯åˆ¤æ–­æ˜¯å‰æ™¯è¿˜æ˜¯èƒŒæ™¯
>    - è¾¹ç•Œæ¡†å›å½’åç§»é‡å¯¹anchorçš„ä¸­å¿ƒç‚¹ä»¥åŠå®½é«˜è¿›è¡Œè°ƒæ•´ï¼Œä½¿å…¶æ¥è¿‘çœŸå®ç›®æ ‡æ¡†
> 5. æ ¹æ®3ï¼Œ4 ï¼Œ å°†è°ƒæ•´è¿‡çš„anchors æ˜ å°„åˆ°åŸå›¾å¾—åˆ°proposalsï¼Œ å¹¶é€šè¿‡nmsæ»¤æ‰ä¸€éƒ¨åˆ†ï¼Œä¿ç•™ä¸€å®šæ•°é‡çš„å€™é€‰æ¡†
> 6. å€™é€‰åŒºåŸŸé€šè¿‡ROI poolingå±‚ å¾—åˆ°å›ºå®šå¤§å°çš„ç‰¹å¾ 7x7
>    7.é€šè¿‡å…¨è¿æ¥å±‚å±•å¹³ï¼Œé¢„æµ‹ç±»åˆ«+è¾¹ç•Œæ¡†å›å½’
> 7. ç½®ä¿¡åº¦ç­›é€‰+NMSåœ¨æ­¤å¤„ç†ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœ

![](../../../pic/anchors.webp)

## æºç é˜…è¯»

[å‚è€ƒ](https://www.bilibili.com/video/BV1of4y1m7nj/?spm_id_from=333.788.player.switch&vd_source=27496f8ff7e0273476a3325b73c29072&p=5)
