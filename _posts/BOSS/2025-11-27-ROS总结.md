---
layout:     post
title:      ROS 总结
subtitle:   
date:       2024-11-26
author:     phoenixZ
header-img: /img/oip3.jpg
catalog: true
tags:
    - boss
    - ROS
---

Topic / Service / Action 区别与场景：

| 类型 | 特点与典型场景 |
| --- | --- |
| Topic | 单向、异步、发布-订阅模式；适合传感器高频数据（激光、图像、里程计） |
| Service | 双向、同步、请求-应答模式；适合短时、确定性的操作（拍照、查询地图） |
| Action | 双向、异步、可取消并可反馈进度；适合长时间任务（导航、机械臂抓取） |

| 题目 | 标准答案 |
| --- | --- |
| `ros::spin()` vs `spinOnce()` | `spin()`：阻塞式，死循环处理回调；`spinOnce()`：处理一次回调队列后立刻返回，常用于主循环里还有其他逻辑 |
| 回调队列堆积 | 原因：回调处理太慢、`queue_size` 太小、发布频率太高<br>解决：增大 `queue_size`、用多线程 `spinner`（`MultiThreadedSpinner`）、异步 `spinner`、降低发布频率、优化回调函数 |
| `queue_size` 推荐值 | 传感器：10~50，控制指令：1~10，图像：1~3（太大容易卡顿） |
| 多机通信必设环境变量 | `ROS_MASTER_URI`（指向 master 机器 IP）、`ROS_IP`/`ROS_HOSTNAME`（本机 IP） |
| `rosbag` 常用命令 | 录制：`rosbag record -O data.bag /topic1 /topic2`<br>回放：`rosbag play data.bag`<br>指定速度：`--rate 2.0`，压缩：`-j` |